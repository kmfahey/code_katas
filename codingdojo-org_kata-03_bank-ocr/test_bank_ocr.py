#!/usr/bin/python3

from bank_ocr import *


def test_basic_ocr():
    numerals_text = \
""" _  _  _  _  _  _  _  _  _ 
|_  _| _| _||_||_| _||_| _|
|_| _||_  _| _||_| _||_| _|

 _  _     _  _  _  _  _    
|_||_||_| _||_||_ |_|  ||_|
|_| _|  ||_  _| _| _|  |  |

 _  _  _  _  _        _    
|_|  ||_||_||_   ||_||_ |_|
|_|  | _||_||_|  |  ||_|  |

    _  _     _  _  _  _  _ 
  | _| _|  ||_||_   ||_ |_ 
  | _||_   ||_||_|  | _||_|

 _  _     _  _     _  _    
 _||_||_||_||_||_| _||_||_|
|_ |_|  | _||_|  ||_ |_|  |

 _  _  _  _  _  _  _  _  _ 
  ||_| _|  | _| _||_  _||_|
  ||_| _|  | _| _||_||_  _|

    _  _  _  _  _  _     _ 
|_| _|  ||_||_||_ |_ |_|  |
  ||_   | _||_||_||_|  |  |

 _  _        _  _  _     _ 
|_ |_|  |  | _||_||_   ||_ 
|_||_|  |  | _| _| _|  | _|

 _  _        _  _  _  _  _ 
|_||_||_||_| _||_||_|  ||_ 
 _||_|  |  | _||_||_|  ||_|

 _  _  _  _  _  _  _  _  _ 
|_  _||_ |_||_||_||_  _||_ 
 _||_  _| _| _||_| _| _| _|
"""

    numeral_strs = text_to_numerals(numerals_text)


def test_checksum():
    assert checksum_acct_no("632398383") is False
    assert checksum_acct_no("894295974") is False
    assert checksum_acct_no("879861464") is False
    assert checksum_acct_no("132186756") is True
    assert checksum_acct_no("284984284") is False
    assert checksum_acct_no("783733629") is False
    assert checksum_acct_no("427986647") is False
    assert checksum_acct_no("681139515") is False
    assert checksum_acct_no("984438876") is False
    assert checksum_acct_no("525998535") is True

def test_bulk_process():
    numerals_text = """ _  _  _  _     _  _       
|_  _| _|| ||_||_   ||_||_|
|_| _| _||_|  ||_|  |  |  |

 _  _  _     _  _  _     _ 
|_|  | _|  ||_||_ |_||_|| |
 _|  | _|  | _| _| _|  ||_|

 _  _  _     _  _  _  _  _ 
 _| _|  |  || ||_ |_  _||_ 
 _| _|  |  ||_||_| _||_  _|

 _     _  _  _  _  _  _  _ 
|_   ||_ |_|  ||_  _| _||_ 
|_|  | _||_|  | _| _| _| _|

 _  _  _  _  _     _  _    
|_||_   |  ||_  _|| | _||_|
 _| _|  |  ||_| _||_| _|  |

 _  _  _  _  _  _     _  _ 
|_ | ||_ | | _||_|  | _| _|
 _||_||_||_||_  _|  ||_  _|

 _  _     _  _  _  _  _    
 _|  |  || | _| _||_ |_   |
 _|  |  ||_||_  _||_||_|  |

 _  _  _  _        _  _  _ 
|_   ||_   |  ||_| _||_  _|
|_|  ||_|  |  |  ||_ |_| _|

 _  _  _  _  _  _  _       
|_   || ||_ |_ |_||_ |_||_|
 _|  ||_| _||_||_| _|  |  |

 _  _     _  _  _  _  _  _ 
  | _||_| _||_  _|  | _|  |
  ||_   | _| _||_   | _|  |

 _        _  _        _  _ 
|_   |  ||_ |_||_||_||_||_ 
|_|  |  ||_| _|  |  ||_| _|

 _  _  _  _  _        _  _ 
|_ |_||_  _||_||_||_||_||_ 
 _| _| _| _| _|  |  ||_  _|

 _  _  _     _  _  _     _ 
|_ |_ |_   ||_ |_||_   | _|
 _||_| _|  ||_| _| _|  | _|

 _  _  _  _        _  _  _ 
 _||_ |_| _|  ||_|| | _||_|
 _| _||_| _|  |  ||_| _||_|

 _  _        _  _  _  _  _ 
  |  |  |  ||_   ||_ |_   |
  |  |  |  ||_|  | _| _|  |

 _     _        _  _  _  _ 
|_|  | _|  |  ||_ |_| _||_ 
|_|  ||_   |  ||_||_| _||_|

 _  _  _  _  _  _  _  _  _ 
|_| _| _|  | _| _|  | _||_ 
 _||_  _|  ||_ |_   ||_ |_|

    _  _  _  _  _  _       
  | _|  || ||_  _| _|  |  |
  | _|  ||_||_||_  _|  |  |

    _  _     _  _  _  _  _ 
|_| _| _||_||_||_| _| _||_|
  | _| _|  | _| _| _| _||_|

 _  _  _  _  _  _  _  _    
| | _||_   ||_| _||_|  ||_|
|_| _| _|  ||_| _| _|  |  |

 _  _           _     _  _ 
| | _||_||_||_| _||_| _||_|
|_||_   |  |  ||_   ||_  _|

 _     _  _  _        _    
 _||_||_| _||_||_||_|  ||_|
|_   ||_||_  _|  |  |  |  |

 _  _           _     _  _ 
 _| _||_||_|  |  ||_| _|| |
|_  _|  |  |  |  |  ||_ |_|

 _  _  _  _  _  _  _  _  _ 
  ||_||_ |_|| ||_||_ |_|  |
  ||_| _| _||_||_| _||_|  |

 _     _  _  _  _     _    
|_|  |  | _||_| _|  | _||_|
 _|  |  | _||_| _|  | _|  |

 _  _  _  _  _  _  _  _  _ 
 _|  | _||_ |_  _|  ||_ |_ 
 _|  | _||_| _||_   | _| _|

 _        _  _     _  _    
  |  |  ||_||_   ||_ |_|  |
  |  |  ||_| _|  | _||_|  |

    _  _  _  _     _  _  _ 
  ||_| _||_| _||_|  ||_  _|
  | _| _||_||_   |  | _||_ 

 _  _  _  _  _  _     _  _ 
|_||_| _||_||_ |_ |_||_||_ 
|_||_||_ |_||_||_|  ||_||_|

 _        _  _  _  _  _  _ 
|_||_||_||_||_||_| _|  | _|
|_|  |  ||_| _| _| _|  ||_ 

 _  _     _     _  _  _    
 _| _|  | _|  | _||    |  |
|_  _|  | _|  ||_  _|  |  |

 _     _     _  _     _  _ 
|_ |_| _|  ||_  _||_| _||_ 
|_|  | _|  ||_| _|  ||_  _|

 _  _     _     _  _  _  _ 
|_   |  | _||_||_| _|  ||_ 
|_|  |  ||_   ||_| _|  | _|

 _  _        _  _  _  _    
|_   ||_|  ||_| _| _| _||_|
 _|  |  |  | _| _||_  _|  |

 _  _     _  _  _  _     _ 
|_  _|  | _|  ||_||_|  | _|
|_| _|  ||_   ||_| _|  | _|

 _     _  _  _  _  _  _  _ 
|_   | _| _|| |  | _|  || |
|_|  | _||_ |_|  ||_   ||_|

 _     _  _     _  _  _  _ 
|_   ||_ |_ |_| _||_  _|  |
 _|  | _||_|  | _||_||_   |

 _  _  _  _     _  _  _  _ 
|_||_||_| _|  |  ||_||_ |_ 
|_| _||_||_   |  ||_||_| _|

 _  _  _     _     _  _  _ 
|_ |_||_   ||_|  ||_||_ |_|
 _| _| _|  | _|  | _| _| _|

    _  _  _  _  _  _  _    
  | _|  | _||_   ||_||_ |_|
  ||_   ||_ |_|  | _||_|  |

 _  _     _  _  _  _  _    
|_ |_   |  || | _| _||_ |_|
|_| _|  |  ||_| _| _||_|  |

 _     _  _  _  _  _  _  _ 
 _||_| _| _| _| _| _| _|  |
|_   | _||_ |_  _||_ |_   |

    _  _     _  _  _     _ 
  |  ||_||_| _||_||_||_||_|
  |  | _|  | _||_| _|  ||_|

 _  _           _  _  _  _ 
|_| _|  |  ||_||_| _||_|  |
|_||_   |  |  ||_| _| _|  |

 _  _     _  _     _  _  _ 
 _||_   || ||_||_| _||_  _|
 _| _|  ||_| _|  ||_  _| _|

 _  _  _     _  _  _  _    
|_||_ |_ |_|  || || ||_ |_|
 _| _| _|  |  ||_||_||_|  |

 _  _  _  _  _  _  _  _  _ 
|_   ||_||_| _|  | _|  ||_ 
|_|  | _| _| _|  ||_   | _|

    _           _  _       
  ||_   |  |  | _| _|  ||_|
  ||_|  |  |  ||_ |_   |  |

 _  _     _  _  _  _     _ 
|_  _||_||_||_|  ||_ |_|| |
|_| _|  ||_| _|  ||_|  ||_|

 _  _  _  _     _  _  _  _ 
|_||_ |_   ||_|  ||_||_||_ 
|_||_||_|  |  |  ||_||_| _|
"""
    output = bulk_process_acct_no_text(numerals_text).split("\n")
    assert output[0] ==  "633046744"
    assert output[1] ==  "973195940"
    assert output[2] ==  "337106525"
    assert output[3] ==  "615875335"
    assert output[4] ==  "95776?034 ILL"
    assert output[5] ==  "506029123"
    assert output[6] ==  "371023661"
    assert output[7] ==  "676714263 ERR"
    assert output[8] ==  "570568544"
    assert output[9] ==  "724352737 ERR"
    assert output[10] == "611694485 ERR"
    assert output[11] == "5953944?5 ILL"
    assert output[12] == "565169513"
    assert output[13] == "358314038"
    assert output[14] == "771167557 ERR"
    assert output[15] == "812116836"
    assert output[16] == "923722726"
    assert output[17] == "137062311"
    assert output[18] == "433499338"
    assert output[19] == "035783974"
    assert output[20] == "024442429"
    assert output[21] == "248294474"
    assert output[22] == "234417420"
    assert output[23] == "785908587"
    assert output[24] == "917383134 ERR"
    assert output[25] == "373652755"
    assert output[26] == "711851581"
    assert output[27] == "193824752"
    assert output[28] == "882866486"
    assert output[29] == "844899372"
    assert output[30] == "231312?71 ILL"
    assert output[31] == "643163425"
    assert output[32] == "671248375"
    assert output[33] == "574193234 ERR"
    assert output[34] == "631278913 ERR"
    assert output[35] == "613207270"
    assert output[36] == "515643627 ERR"
    assert output[37] == "898217865"
    assert output[38] == "595191959"
    assert output[39] == "127267964"
    assert output[40] == "651703364 ERR"
    assert output[41] == "243223227 ERR"
    assert output[42] == "179438948"
    assert output[43] == "821148397"
    assert output[44] == "351094253"
    assert output[45] == "955470064"
    assert output[46] == "679937275 ERR"
    assert output[47] == "161112214 ERR"
    assert output[48] == "634897640"
    assert output[49] == "866747885"

